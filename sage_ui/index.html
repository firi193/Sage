<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nameless</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <h1>Nameless</h1>
            <div class="user-info">
                <!-- Developer/user session info -->
                <span class="user-badge">Developer Dashboard</span>
            </div>
        </header>
        
        <nav class="app-nav">
            <button id="keys-tab" class="nav-item active" data-view="keys">Keys</button>
            <button id="grants-tab" class="nav-item" data-view="grants">Grants</button>
            <button id="logs-tab" class="nav-item" data-view="logs">Logs</button>
            <!-- Reserved space for future Analytics/Alerts tabs -->
        </nav>
        
        <main class="app-main">
            <div id="keys-view" class="view active" role="tabpanel" aria-labelledby="keys-tab" aria-hidden="false">
                <div class="keys-section">
                    <div class="section-header">
                        <h2>API Keys</h2>
                        <button class="btn-primary" id="add-key-btn">Add Key</button>
                    </div>
                    
                    <div class="keys-list" id="keys-list">
                        <div class="placeholder-content" id="keys-placeholder">
                            <p>Your API keys will appear here</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="grants-view" class="view" role="tabpanel" aria-labelledby="grants-tab" aria-hidden="true">
                <div class="grants-section">
                    <div class="section-header">
                        <h2>Access Grants</h2>
                        <div class="grants-controls">
                            <select id="key-filter" aria-label="Filter grants by key">
                                <option value="">All Keys</option>
                                <!-- Populated with user's keys -->
                            </select>
                            <button class="btn-primary" id="create-grant-btn">Create Grant</button>
                        </div>
                    </div>
                    
                    <div class="grants-list" id="grants-list">
                        <div class="placeholder-content" id="grants-placeholder">
                            <p>Access grants will appear here</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="logs-view" class="view" role="tabpanel" aria-labelledby="logs-tab" aria-hidden="true">
                <div class="logs-section">
                    <div class="section-header">
                        <h2>Usage Logs</h2>
                        <div class="logs-filters">
                            <select id="key-filter-logs" aria-label="Filter logs by key">
                                <option value="">All Keys</option>
                                <!-- Populated with user's keys -->
                            </select>
                            <select id="time-filter" aria-label="Filter logs by time period">
                                <option value="24h">Last 24 Hours</option>
                                <option value="7d">Last 7 Days</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="logs-container">
                        <div class="logs-table-wrapper">
                            <table class="logs-table" id="logs-table">
                                <thead>
                                    <tr>
                                        <th>Timestamp</th>
                                        <th>Agent/App ID</th>
                                        <th>Key</th>
                                        <th>Endpoint</th>
                                        <th>Status</th>
                                        <th>Response Time</th>
                                    </tr>
                                </thead>
                                <tbody id="logs-tbody">
                                    <!-- Log entries will be populated here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="logs-empty" id="logs-empty" style="display: none;">
                            <div class="placeholder-content">
                                <p>No usage logs found for the selected filters.</p>
                            </div>
                        </div>
                        
                        <div class="logs-loading" id="logs-loading" style="display: none;">
                            <div class="placeholder-content">
                                <div class="loading-spinner">
                                    <div class="spinner"></div>
                                </div>
                                <p>Loading usage logs...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <div class="notifications">
            <!-- Success/error messages -->
        </div>
    </div>

    <!-- Add Key Modal -->
    <div class="modal" id="add-key-modal">
        <div class="modal-content">
            <h3>Add New API Key</h3>
            <form id="add-key-form" data-form-type="add-key">
                <input type="text" name="key_name" placeholder="Key Name (e.g., 'OpenAI Production')" required>
                <select name="environment" required>
                    <option value="">Select Environment</option>
                    <option value="staging">Staging</option>
                    <option value="prod">Production</option>
                </select>
                <textarea name="api_key" placeholder="API Key" required rows="3"></textarea>
                <div class="modal-actions">
                    <button type="button" id="cancel-add-key">Cancel</button>
                    <button type="submit" class="btn-primary">Add Key</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal" id="delete-key-modal">
        <div class="modal-content">
            <h3>Delete API Key</h3>
            <p>Are you sure you want to delete this API key? This action cannot be undone.</p>
            <div class="key-info" id="delete-key-info">
                <!-- Key info will be populated here -->
            </div>
            <div class="modal-actions">
                <button type="button" id="cancel-delete-key">Cancel</button>
                <button type="button" class="btn-primary" id="confirm-delete-key" style="background: #e74c3c;">Delete Key</button>
            </div>
        </div>
    </div>

    <!-- Create Grant Modal -->
    <div class="modal" id="create-grant-modal">
        <div class="modal-content">
            <h3>Create Access Grant</h3>
            <form id="create-grant-form" data-form-type="create-grant">
                <select name="key_id" required>
                    <option value="">Select Key</option>
                    <!-- Populated with user's keys -->
                </select>
                <input type="text" name="caller_agent_id" placeholder="Agent/App ID that will use this key" required>
                <input type="number" name="max_calls_per_day" placeholder="Max Calls Per Day" min="1" required>
                <input type="date" name="expiry_date" required>
                <div class="modal-actions">
                    <button type="button" id="cancel-create-grant">Cancel</button>
                    <button type="submit" class="btn-primary">Create Grant</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Revoke Grant Confirmation Modal -->
    <div class="modal" id="revoke-grant-modal">
        <div class="modal-content">
            <h3>Revoke Access Grant</h3>
            <p>Are you sure you want to revoke this access grant? This action cannot be undone.</p>
            <div class="grant-info" id="revoke-grant-info">
                <!-- Grant info will be populated here -->
            </div>
            <div class="modal-actions">
                <button type="button" id="cancel-revoke-grant">Cancel</button>
                <button type="button" class="btn-primary" id="confirm-revoke-grant" style="background: #e74c3c;">Revoke Grant</button>
            </div>
        </div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/components.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
